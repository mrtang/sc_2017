<div class="clearfix" xmlns="http://www.w3.org/1999/html">&nbsp;</div> 
<style>
    .nav.nav-tabs .thembtn a{
        cursor: pointer!important;
        color: #428bca!important;
    }
</style>
<div class="col-lg-12" ng-controller="OrderCreateParentCtrl">
    
        <div class="row">
            <div class="col-lg-12">
                <h3 class="font-thin pull-left m-t-none m-r-md">{{'OBG_TaoMoiDonHang' | translate}}<!-- Tạo mới đơn hàng --></h3>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12" ng-if="notice.content.length > 0">
                <div class="alert alert-warning" role="alert" ng-bind-html="notice.content"></div>
            </div>
        </div>
        
        <div class="row" style="margin-bottom:70px">
            <div class="col-lg-12 col-md-12">
                  <tabset justified="false" >

                    <tab heading="Tạo đơn {{To.Buyer.Name.length > 0 ? ': ' + To.Buyer.Name : item}}" ng-repeat="item in tabs track by $index" ng-controller="OrderCreateV2Ctrl" active="$last">
                        <form class="form-validation form-horizontal" role="form"  name="frmOrderCreate_{{$index}}">
                            <div class="row bg-white">
                            <div class="col-md-8 col-lg-8 " >
                                <div class="row">
                                    <div class="col-md-6">
                                        <p class="m-t-md m-b-md"><strong>1. {{'OBG_1GiaoHangToiNguoiNhan' | translate }}<!-- 1. Giao hàng tới người nhận --></strong></p>
                                        <div id="buyer-info">
                                            <div class="form-group">
                                                <label for="buyer_phone" name="buyer_phone" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoDienThoai' | translate}}<!-- Số điện thoại --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <!-- <input type="text" ng-model="To.Buyer.Phone" class="form-control" id="buyer_phone" placeholder="Số điện thoại người nhận (*)"> -->
                                                    <!-- <tags-input
                                                        on-tag-added="addingPhone()"
                                                        on-tag-removed="addingPhone()"
                                                        min-length="9"
                                                        max-length="14"
                                                        max-tags="2"
                                                        
                                                        ng-model="To.Buyer.Phone" 
                                                        placeholder="Số điện thoại người nhận (*)" 
                                                        required 
                                                        >
                                                    </tags-input> -->

                                                    <div class="input-group">
                                                        <!-- <input type="text" ng-model="To.Buyer.Phone"  minlength="9" maxlength="14" class="form-control" placeholder="Số điện thoại người nhận" required> -->
                                                        <buyer-autocomplete 
                                                                fullname="To.Buyer.Name" 
                                                                code="To.Buyer.Id"
                                                                address="To.Buyer.Address"
                                                                ng-model="To.Buyer.Phone"
                                                                phonetwo="To.Buyer.Phone2"
                                                                area="To.Buyer.Area"
                                                                phone-false="phoneFalse">
                                                        </buyer-autocomplete>
                                                        

                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" ng-click="show_phone2 = !show_phone2"><i class="fa {{!show_phone2 ? 'fa-plus' : 'fa-minus'}}"></i></button>
                                                        </span>
                                                    </div><!-- /input-group -->

                                                    <small class="label label-warning" ng-if="phoneFalse">{{'OBG_HinhNhuBanNhapSaoSDT' | translate}}<!-- Hình như bạn nhập sai số điện thoại, vui lòng kiểm tra lại ?. --></small>
                                                    
                                                </div>
                                            </div>


                                            <div class="form-group" ng-if="show_phone2" >
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="To.Buyer.Phone2" name="buyer_phone2"  minlength="9" maxlength="14" class="form-control" placeholder="{{'OBG_HinhNhuBanNhapSaoSDT' | translate}}"  autofocus >
                                                  <small class="label label-warning" ng-if="phone2IsWrong">{{'OBG_HinhNhuBanNhapSaoSDT' | translate}}<!-- Hình như bạn nhập sai số điện thoại, vui lòng kiểm tra lại ?. --></small>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_HoTen' | translate}}<!-- Họ tên --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="To.Buyer.Name" name="buyer_name" class="form-control" id="buyer_name"  placeholder="{{'OBG_HoTen' | translate}}" required>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="buyer_address" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_DiaChi' | translate}}<!-- Địa chỉ --></label>
                                                <div class="col-lg-9 col-md-8">

                                                    <input class="form-control" ng-model="To.Buyer.Address" name="buyer_address" details="autocomplete_details" required google-autocomplete required placeholder="{{'OBG_NhapDiaChiDuongNgo' | translate}}"/>

                                                    <!-- <input type="text" ng-model="To.Buyer.Address" class="form-control" id="buyer_address" placeholder="Nhập địa chỉ chính xác"> -->
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhuVuc' | translate}}<!-- Khu vực --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <district-from-google-place ng-model="To.Buyer.Area" name="buyer_area" default-district="To.Buyer.Area.district_id" details="autocomplete_details"></district-from-google-place required>
                                                  <!-- <input type="text" ng-model="To.Buyer.Area" class="form-control" id="buyer_name" placeholder="Ví dụ: Quận 19, TP. Hồ Chí Minh"> -->
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="list_ward_by_district.length > 0">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_PhuongXa' | translate}}<!-- Phường/xã --></label>
                                                <div class="col-lg-9 col-md-8" >

                                                    <select ng-model="To.Buyer.ward_id" class="form-control" name="buyer_ward" required>
                                                        <option value="">{{'OBG_ChonPhuongXa' | translate}}<!-- Chọn Phường/xã --></option>
                                                        <option value="{{item.id}}" ng-repeat="item in list_ward_by_district">{{item.ward_name}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                        </div>

                                        <p class="m-t-md m-b-md"><strong>2. {{'OBG_LayHangGuiTai' | translate}}<!-- 2. Lấy hàng gửi tại --></strong></p>

                                        <div id="inventory_info">
                                            <div class="form-group">
                                                <label for="inventory" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_ChonKhoHang' | translate}}<!-- Chọn kho hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                <div class="input-group">

                                                    <ui-select ng-model="From.Inventory"  name="inventory" ng-disabled="disabled" required>
                                                        <ui-select-match placeholder="Kho hàng">{{$select.selected.name }}</ui-select-match>
                                                        <!-- refresh="loadInventory(pos, $select.search)" refresh-delay="0" -->
                                                        <ui-select-choices  group-by="'inventory'" repeat="value in list_inventory | filter: $select.search track by $index">

                                                            <span>{{value.name + ' - ' + value.phone}} <small ng-if="value.distance" class="text-info pull-right">{{'OBG_CachDay' | translate}} {{value.distance}} km</small><br/>
                                                  <span>{{value.full_address}} </span></span>
                                                        </ui-select-choices>
                                                    </ui-select>

                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" ng-click="addInventory()"><i class="fa fa-plus"></i></button>
                                                    </span>
                                                </div><!-- /input-group -->
                                                  
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="inventory_phone" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoDienThoai' | translate}}</label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="From.Inventory.phone" class="form-control" name="inventory_phone_abx" id="inventory_phone" placeholder="0912328925" ng-disabled="From.Inventory.id && From.Inventory.id > 0" ng-if="From.Inventory.id && From.Inventory.id > 0" required >

                                                  <tags-input
                                                        name="inventory_phone"
                                                        id="inventory_phone"
                                                        on-tag-added="addingPhone(From.Inventory.phone)"
                                                        on-tag-removed="addingPhone(From.Inventory.phone)"
                                                        min-length="9"
                                                        max-length="14"
                                                        max-tags="2"
                                                        ng-if="!From.Inventory.id"
                                                        ng-model="From.Inventory.phone" 
                                                        placeholder="{{'OBG_SDTNguoiGiaoHang' | translate}}" 
                                                        required 
                                                        >
                                                    </tags-input> 
                                                    <small class="label label-warning" ng-if="phoneIsWrong" ng-if="!From.Inventory.id">{{'OBG_HinhNhuBanNhapSaiSDT' | translate}}<!-- Hình như bạn nhập sai số điện thoại, vui lòng kiểm tra lại ?. --></small>

                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="inventory_username" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_HoTen' | translate}}<!-- Họ tên --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="From.Inventory.user_name" class="form-control" id="inventory_username" placeholder="Nguyễn Văn A" ng-disabled="From.Inventory.id && From.Inventory.id > 0" required name="inventory_username">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="inventory_address" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_DiaChi' | translate}}<!-- Địa chỉ --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="From.Inventory.address" class="form-control" id="inventory_address" placeholder="{{'OBG_VDDiaChi' | translate}}" ng-disabled="From.Inventory.id && From.Inventory.id > 0" google-autocomplete details="inventory_add_details" ng-required="true" required>
                                                </div>
                                            </div>

                                            <div class="form-group" >
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhuVuc' | translate}}<!-- Khu vực --></label>
                                                <div class="col-lg-9 col-md-8" >


                                                    <input type="text" name="inventory_ward_name" class="form-control" value="{{From.Inventory.ward.ward_name}}, {{From.Inventory.province.district_name}}, {{From.Inventory.city.city_name}}" ng-if="From.Inventory.id && From.Inventory.id > 0" ng-disabled="From.Inventory.id && From.Inventory.id > 0" required>

                                                    <district-from-google-place ng-model="From.Inventory.Area" ng-if="!From.Inventory.id" details="inventory_add_details"></district-from-google-place required> 
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="From.Inventory.Area.district_id > 0">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_PhuongXa' | translate}}<!-- Phường/xã --></label>
                                                <div class="col-lg-9 col-md-8" >

                                                    <select ng-model="From.Inventory.ward_id" class="form-control" required>
                                                        <option value="">{{'OBG_ChonPhuongXa' | translate}}<!-- Chọn Phường/xã --></option>
                                                        <option value="{{item.id}}" ng-repeat="item in list_ward">{{item.ward_name}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="!From.Inventory.id">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8" >
                                                    <button class="btn btn-primary" 
                                                            type="button" 
                                                            ng-click="saveInventory(From.Inventory)"
                                                            ng-disabled="!From.Inventory.ward_id || !From.Inventory.phone || !From.Inventory.user_name || !From.Inventory.Area.city_id || saveInventoryLoading"
                                                            >{{'OBG_LuuThongTinKho' | translate}}<!-- Lưu thông tin kho --></button>

                                                    <button class="btn btn-default" 
                                                            type="button" 
                                                            ng-click="cancelAddInventory()"
                                                            >{{'OBG_Huy' | translate}}<!-- Hủy --></button>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p class="m-t-md m-b-md"><strong>{{'OBG_3HangHoa' | translate}}<!-- 3. Hàng hóa --></strong></p>
                                        <div class="product-info">
                                            <div class="form-group">
                                                <label for="product_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TenHang' | translate}}<!-- Tên hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <item-autocomplete code="Product.Id" price-model="Product.Price" weight-model="Product.Weight" name-model="Product.Name" required></item-autocomplete>   
                                                  <!-- <input type="text" ng-model="Product.Name" class="form-control" id="product_name" placeholder="Ví dụ: Tên sản phẩm" required > -->
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label for="product_quantity" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoLuong' | translate}}<!-- Số lượng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="Product.Quantity" formatnumber class="form-control" id="product_quantity" placeholder="{{'OBG_SoLuongSanPham' | translate}}" required ng-maxlength="3" >
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="product_amount" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TriGiaHang' | translate}}<!-- Trị giá hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="Product.Price"  formatnumber ng-if="ViewHomeCurrency ==viewCurrency" class="form-control" id="product_amount"  placeholder="{{'OBG_TriGiaHang' | translate}} ({{ViewHomeCurrency}})" required ng-minlength="5" >
                                                  <input type="text" ng-model="Product.Price_curernt_2" ng-if="ViewHomeCurrency != viewCurrency" ng-change="Product.Price=convert_currency_to_home_currency(Product.Price_curernt_2)"  class="form-control" id="product_amount"  placeholder="{{'OBG_TriGiaHang' | translate}} ({{viewCurrency}})" required ng-minlength="1" >
	                                                
	                                                <span  style="float:right" ng-if="ViewHomeCurrency !=viewCurrency">
										              {{Product.Price || '0' | number:0}}{{ViewHomeCurrency}}
										            </span>
										           <!--  <span  style="float:right" ng-if="ViewHomeCurrency ==viewCurrency">
										               {{Product.Price_curernt_2 || '0' | number:2 }} {{viewCurrency}}
										            </span> ng-change="Product.Price_curernt_2 = convert_currency(Product.Price)"-->
                                                </div>
                                            </div>

                                            <div class="form-group" style="margin-bottom:6px;">
                                                <label for="product_weight" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhoiLuong' | translate}}<!-- Khối lượng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="Product.Weight" formatnumber class="form-control" id="product_weight" placeholder="{{'OBG_NhapKhoiLuongTheoGram' | translate}}" required tooltip="{{'OBG_TrongTHNhapSaiKhoiLuong' | translate}}"  tooltip-trigger="focus" >
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="product" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                    <div class="checkbox">
                                                        <label class="i-checks padder-md padder-xs" >
                                                            <input type="checkbox"
                                                                   ng-model="box_size_check" /><i></i>
                                                            <!-- Nhập thêm thể tích kiện hàng -->
                                                            {{'OBG_NhapThemTheTich' | translate}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-show="box_size_check">
                                                <label ng-show="keyLang!='en'" for="product_boxsize" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TheTich' | translate}}<!-- Thể tích  -->
                                                	<i class="icon-question"  aria-hidden="true" id="boxsize-popover"></i>
                                                </label>
                                                <label ng-show="keyLang=='en'" for="product_boxsize" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TheTich' | translate}}<!-- Thể tích  -->
                                                <i class="icon-question"  aria-hidden="true" id="boxsize-popover1"></i>
                                                </label>
                                                <div class="col-lg-9 col-md-8">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_l" ng-model="Product.BoxSize.L" class="form-control"  placeholder="{{'OBG_Dai' | translate}}">
                                                        </div>

                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_w" ng-model="Product.BoxSize.W" class="form-control"  placeholder="{{'OBG_Rong' | translate}}">
                                                        </div>

                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_h" ng-model="Product.BoxSize.H" class="form-control" placeholder="{{'OBG_Cao' | translate}}">
                                                        </div>

                                                    </div>
                                                  
                                                </div>
`												
                                                <script>
                                                    $(document).ready(function (){
                                                        $('#boxsize-popover').popover({
                                                            html: true,
                                                            content: 'Bạn nên nhập thể tích hàng hoá sau đóng gói để tính phí vận chuyển chính xác hơn. <br/>- Phí vận chuyển sẽ được tính dựa trên giá khối lượng hàng hoá hoặc khối lượng quy đổi (<strong>dài x rộng x cao /6000 với chuyển phát nhanh hoặc dài x rộng x cao/3000 với chuyển phát tiết kiệm</strong>).<br/>- Nếu khối lượng nào lớn hơn thì Shipchung sẽ sử dụng làm khối lượng tính phí.<br/>- Trong trường hợp bạn nhập khối lượng không chính xác, hãng vận chuyển có thể cập nhật lại và bạn có thể phát sinh phí vượt cân.<br/>- <strong>Lưu ý</strong>: Nếu có phát sinh phí vượt cân thì tổng số tiền thu hộ vẫn giữ nguyên như lúc duyệt đơn hàng.',
                                                            trigger: 'hover'
                                                        })
                                                        $('#boxsize-popover1').popover({
                                                            html: true,
                                                            content: 'You should be input volume dimension. it help us estimate your order shipping fee more exactly. We use dim volumetric weight & actual weight also.  According courier policy, If volumes greater than we would choose that volume. <br/>- If you type it is not correct, we will charge over weight fee later. Important: If you weight is not correct, we will update it later but we will not change the total CoD money amount that you approved before.',
                                                            trigger: 'hover'
                                                        })
                                                    })
                                                </script>
                                            </div>

                                            <div class="form-group">
                                                <label for="product_code" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_MaDonHang' | translate}}<!-- Mã đơn hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                  <input type="text" ng-model="Product.Code"  class="form-control" id="product_code" placeholder="{{'OBG_MaDonHangCuaBan' | translate}}">
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="Config.Type == 1">
                                                <label for="product_collect" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TienThiHo' | translate}}<!-- Tiền thu hộ --> </label>
                                                <div class="col-lg-9 col-md-8 ">
                                                  <input ng-if="viewCurrency == ViewHomeCurrency"   type="text" ng-model="Product.MoneyCollect" id="money_collect" formatnumber class="form-control" id="product_collect" placeholder="{{'OBG_TienThiHo' | translate}}" required tooltip="{{'OBG_SCSeThuHoTheoSoTienBanNhap' | translate:{isShipchung : isShipchung} }}"  tooltip-trigger="focus">
                                                  <input ng-if="viewCurrency != ViewHomeCurrency"  type="text" ng-model="Product.MoneyCollect_curernt_2"  ng-change="Product.MoneyCollect=convert_currency_to_home_currency(Product.MoneyCollect_curernt_2)" id="money_collect"  class="form-control" id="product_collect" placeholder="{{'OBG_TienThiHo' | translate}}" required tooltip="{{'OBG_SCSeThuHoTheoSoTienBanNhap' | translate:{isShipchung : isShipchung} }}"  tooltip-trigger="focus">
                                                </div>
                                            </div>





                                        </div>
                                    </div>
                                </div>
                            </div>

                            <style>
                                .waiting {
                                    background: rgb(248, 248, 248)
                                }
                                .waiting .loading{
                                        position: absolute;
                                        left: 43%;
                                        top: 43%;
                                        z-index: 10000;
                                }
                                .waiting .backdrop{
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    left:0;
                                    bottom:0;
                                    z-index: 100;   
                                }

                                #inventory_info .ui-select-choices-content{
                                    width: 490px;
                                }


                                tags-input .tags{
                                    box-shadow: none;
                                    border:1px solid #cfdadd;
                                    -moz-appearance: initial;
                                    -webkit-appearance: initial;
                                }
                                #buyer-info .ui-select-choices-row{
                                    padding:4px!important;
                                }

                                #service_box .ui-select-choices-row{
                                    padding:4px!important;
                                }
                                .product-info .popover  {
                                    max-width:400px!important;
                                }
                                .product-info .popover-content  {
                                    width:400px!important;
                                }
                                

                            </style>
                            <div class="col-md-4 col-lg-4 service_box" ng-class="{'waiting': waiting}">
                                <div class="backdrop" ng-if="waiting"></div>
                                <div class="loading" ng-if="waiting"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                                <p class="m-t-md m-b-md"><strong>4. Dịch vụ</strong></p>
                                    <div id="service">
                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">
                                              <select id="u376_input" class="form-control" ng-model="Config.Type">
                                                  <option value="2">{{'OBG_ThuHoTienHang_PVC_COD' | translate}}<!-- Thu hộ tiền hàng &amp; phí vận chuyển, phí thu hộ --></option>
                                                  <option value="1">{{'OBG_ThuHoTheoSoTienKHNhap' | translate}}<!-- Thu hộ theo số tiền quý khách nhập --></option>
                                                  <option value="3">{{'OBG_ChiThuHoTienHang' | translate}}<!-- Chỉ thu hộ tiền hàng --></option>
                                                  <option value="4">{{'OBG_ChiThuPVC_Cod' | translate}}<!-- Chỉ thu hộ phí vận chuyển &amp; phí thu hộ --></option>
                                                  <option value="5">{{'OBG_KhongThuHo' | translate}}<!-- Không thu hộ --></option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">

                                            <ui-select ng-model="Config.Service"  required id="service_select">
                                                <ui-select-match placeholder="Chọn dịch vụ"><i class="fa {{$select.selected.id == 2 ? 'fa-plane' : 'fa-car'}} " aria-hidden="true"></i> 
                                                {{keyLang=='vi' ? $select.selected.name : $select.selected.name_en}}<!-- {{$select.selected.name}} --> <span ng-if="calculateInfo.selected_courier">({{calculateInfo.selected_courier.leatime_str}})</span></ui-select-match>
                                                <ui-select-choices repeat="value.id as value in list_services | filter: $select.search">
                                                  <span><i class="fa {{value.id == 2 ? 'fa-plane' : 'fa-truck'}} " aria-hidden="true"></i>
                                                  {{keyLang=='vi' ? value.name : value.name_en}}<!--  {{value.name}} --> <span ng-if="calculateInfo.selected_courier && value.id == $select.selected.id">({{calculateInfo.selected_courier.leatime_str}})</span></span>
                                                </ui-select-choices>
                                            </ui-select>

                                              <!-- <select id="u376_input" class="form-control" >
                                                  <option value="2">Dịch vụ chuyển phát nhanh</option>
                                                  <option value="1">Chuyển phát tiết kiệm</option>
                                                </select> -->
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">
                                              <ui-select ng-model="calculateInfo.selected_courier"  ng-disabled="disabled" >
                                                    <ui-select-match placeholder="Hãng vận chuyển"><img ng-src="/img/logo-hvc/{{$select.selected.courier_id}}.png" alt="" width="50px"> {{$select.selected.courier_name}} </ui-select-match>
                                                    <!-- refresh="loadInventory(pos, $select.search)" refresh-delay="0" -->
                                                    <ui-select-choices  repeat="value in list_courier_detail  | filter: $select.search track by $index">
                                                      <div class="row">
                                                            <div class="pull-left m-r-sm"> 
                                                                <img ng-src="http://seller.shipchung.vn/img/logo-hvc/{{value.courier_id}}.png" ng-if="value.courier_id" alt="" width="50px" >
                                                            </div>
                                                            <div class="pull-left">
                                                                <span>{{value.courier_name}} </span><br/>
                                                            </div>
                                                      </div>
                                                      
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">
                                                <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Protected" ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                </label>
                                                {{'OBG_MuaDichVuKHaiGia' | translate }}<!-- Mua dịch vụ khai giá (bảo hiểm) --> <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_NeuQuyKhachMuaDVBaoHiem' | translate }}"  tooltip-trigger="mouseenter"></i></a>

                                            </div>
                                        </div>
            
                                        
                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">
                                                <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Fragile"  ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                  
                                                </label>
                                               {{'OBG_HangDeVo' | translate}} <!-- Hàng dễ vỡ/chất lỏng --> <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_VoiHangDeVoVuiLongDongGoi' | translate}}"  tooltip-trigger="mouseenter"></i></a>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <div class="col-lg-12 col-md-12">
                                                <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Checking"  ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                  
                                                </label>
                                                {{'OBG_ChoKhachXemHangKhiNhan' | translate}}<!-- Cho khách xem hàng khi nhận --> <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_NeuBanSuDungDichVu' | translate}}""  tooltip-trigger="mouseenter"></i></a>
                                            </div>
                                        </div>



                                        <p class="m-t-md m-b-md"><strong>5. {{'OBG_TinhPhiVaThuHo' | translate}}<!-- 5. Tính phí & tiền thu hộ --></strong></p>

                                        <div id="fee_detail">
                                            <div class="form-group" ng-if="1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup > 0">
                                                <div class="col-md-6"><i class="fa fa-truck" aria-hidden="true"></i>  {{'OBG_PhiVanChuyen' | translate}}<!-- Phí vận chuyển --></div>

                                                <div class="col-md-6 text-right"><span style="color:#993333" ng-init="fee_detail.pvc_curernt_2 =1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup ">
                                                	<span ng-if="viewCurrency != ViewHomeCurrency">
							                           {{convert_currency(1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup) || '' | usdNumber  | number:2 }}{{viewCurrency}}
							                        </span>
							                       <span ng-if="viewCurrency == ViewHomeCurrency">
							                           {{(1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup) || '0' |vnNumber}}{{viewCurrency}}
							                        </span> 
                                                	<!-- <convert-currency home-currency="1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup" ng-model="test"></convert-currency> -->
                                                	</span>
                                                	
                                                </div>
                                                <div class="cleafix"></div>
                                            </div>
                                            
                                            <div class="form-group" ng-if="fee_detail.vas.cod > 0">
                                                <div class="col-md-6"><i class="fa fa-usd" aria-hidden="true"></i> &nbsp;{{'OBG_PhiThuHo' | translate}}<!-- Phí thu hộ --></div>

                                                <div class="col-md-6 text-right"><span style="color:#993333"><!-- {{fee_detail.vas.cod || '0' |vnNumber}} -->
                                                	<span ng-if="viewCurrency != ViewHomeCurrency">
							                           {{convert_currency(fee_detail.vas.cod) || '' | usdNumber  | number:2 }} {{viewCurrency}}
							                        </span>
							                        <span ng-if="viewCurrency == ViewHomeCurrency">
							                            {{fee_detail.vas.cod |vnNumber }}{{viewCurrency}}
							                        </span> 
							                       
                                                	<!-- <convert-currency home-currency="fee_detail.vas.cod" ></convert-currency> -->
                                                	</span></div>
                                                <div class="cleafix"></div>
                                            </div>

                                            <div class="form-group" ng-if="fee_detail.vas.protected > 0">
                                                <div class="col-md-6"><i class="fa fa-get-pocket" aria-hidden="true"></i> {{'OBG_PhiBaoHiem' | translate}}<!-- Phí Bảo Hiểm --></div>

                                                <div class="col-md-6 text-right"><span style="color:#993333"><!-- {{fee_detail.vas.protected || '0' |vnNumber}}đ -->
                                                	<convert-currency home-currency="fee_detail.vas.protected"></convert-currency>
                                                	</span></div>
                                                <div class="cleafix"></div>
                                            </div>

                                            <div class="form-group" ng-if="fee_detail.discount.pvc > 0 || fee_detail.discount.cod > 0">
                                                <div class="col-md-6"><i class="fa fa-gift" aria-hidden="true"></i>{{'OBG_KhuyenMai' | translate}}<!--  Khuyến mãi --> </div>
                                                <div class="col-md-6 text-right">
                                                <span style="color:#993333"><!-- {{(1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod)  || '0' |vnNumber}}đ -->
                                                	<!-- <convert-currency home-currency="1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod"></convert-currency> -->
                                                	<span ng-if="viewCurrency != ViewHomeCurrency">
							                           {{convert_currency((1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod)) || '' | usdNumber  | number:2 }} {{viewCurrency}}
							                        </span>
							                        <span ng-if="viewCurrency == ViewHomeCurrency">
							                            {{(1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod) |vnNumber }}{{viewCurrency}}
							                        </span>
                                                </span></div>
                                                <div class="cleafix"></div>
                                            </div>

                                            <!-- <div class="form-group" ng-if="fee_detail.seller.discount > 0">
                                                <div class="col-md-6"><i class="fa fa-archive" aria-hidden="true"></i> Người bán khuyến mại(giảm giá) cho người mua</div>
                                                <div class="col-md-6 text-right"><span style="color:#993333">{{fee_detail.seller.discount || '0' |vnNumber}}</span>đ</div>
                                                <div class="cleafix"></div>
                                            </div> -->


                                             

                                            <div class="form-group" ng-if="!NewOrder.TrackingCode">
                                                 <div class="col-md-12">
                                                    <button ng-disabled="createWaiting || waiting || !From.Inventory.id  || frmOrderCreate_{{$index}}.$invalid" class="btn btn-success btn-block btn-lg" type="button" ng-click="CreateOrder(true)">{{'OBG_DuyetDonHangNgay' | translate}} 
	                                                    <span>({{'OBG_ThuHo' | translate}}<!-- Thu hộ  -->:
                                                         
	                                                    	<span ng-if="viewCurrency != ViewHomeCurrency">
									                           {{convert_currency(get_number(fee_detail.collect)) || '' | usdNumber  | number:2 }}{{viewCurrency}})
									                        </span>
									                        <span ng-if="viewCurrency == ViewHomeCurrency">
									                           {{get_number(fee_detail.collect) || '0' | vnNumber}}{{ViewHomeCurrency || 'đ'}})
									                        </span>
									                    </span>
								                      </button>
                                                   <!--  <convert-currency home-currency="get_number(fee_detail.collect)"></convert-currency> -->
                                                </div>

                                                <div class="col-md-12">
                                                    <br/>
                                                    <p class="text-center"><a ng-hide="createWaiting || waiting || frmOrderCreate_{{$index}}.$invalid" ng-click="CreateOrder(false)"><span class="text-info">Lưu lại dơn hàng và duyệt sau</span></a></p>
                                                </div>
                                            </div>
                                            <div class="form-group" ng-if="NewOrder.TrackingCode">
                                                 <div class="col-md-12">
                                                    <button ng-disabled="true" class="btn btn-success btn-block btn-lg">{{NewOrder.status == 20 ? 'OBG_DonHangDaTao' : 'OBG_DonHangDaDuyet' | translate}}<!-- Đơn hàng đã được {{NewOrder.status == 20 ? 'tạo' : 'duyệt'}} --></button>
                                                </div>
                                                
                                            </div>
                                        </div>
    
                                       
                                    </div>
                            </div>
                            </div>
                        </form>
                    </tab>
                    <tab heading="+ Thêm" ng-click="addTabs()" disabled="true" class='thembtn'></tab>

                    <p style="
                        vertical-align: middle;
                        float: right;
                        font-size: 20px;
                    " class="hide"><a ui-sref="order.create"><span class="text-info">&lt;{{'OBG_TroVeTrangCu' | translate}}<!--  Trở về trang tạo đơn cũ --></span></a></p>
                  </tabset>
            </div>
        </div>

    
</div>

